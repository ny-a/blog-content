---
title: "losetupで複数パーティションを持ったイメージファイルをマウントする"
date: 2020-03-11
---

シングルパーティションのイメージファイルをマウントするのは今まで何度もやっていましたが、
ディスク丸ごとのイメージファイルをマウントした記憶は……あまりありません。
強いて言えば VM にアタッチして起動したくらいでしょうか。

`losetup -fP` を使うと複数のパーティションを含んだイメージファイルでループバックデバイスを
セットアップできます。
`-P` オプションを指定すると、セットアップ後にカーネルにパーティションをスキャンさせるようです。
あとは普通に `mount /dev/loop2p1 /mnt` などとするとマウントできました。

手元の環境では起動時から /dev/loop0-7 が自動で作られていますが、これは誰が作っているのかなどは
分かっていないので、まだまだ知識の不足を感じますね……。
